"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e){document.querySelector("#"+e+"+.dropdownList").classList.toggle("show"),document.querySelector("body").addEventListener("click",function(o){document.querySelector("#"+e+"+ .dropdownList")&&(o.target.matches("button")||document.querySelector("#"+e+"+ .dropdownList").classList.remove("show"))})}function o(e,o){document.querySelector("#topicMenu").innerText=e,document.querySelector("#topicMenu + .dropdownList").classList.toggle("show"),document.querySelector(".questionCount").innerHTML=o+" Questions",z?(l(),console.log("random is activated from setTopic")):d(),document.querySelector(".randomHolder").classList.remove("hide")}function t(){document.querySelector(".topic").innerText=k[E].name}function n(){document.getElementById("img").src=k[E].questions[I].img,console.log(k[E].questions[I].img)}function r(){document.querySelector(".category").innerText="Category: "+N}function s(e){document.querySelector("#topicRow .lowerBox").innerHTML=k[e].description}function c(){for(var e="",t=0;t<k.length;t++)e+="<a>"+k[t].name+"</a>";document.querySelector("#topicList").innerHTML=e;for(var n=document.querySelectorAll("#topicList.dropdownList a"),t=0;t<n.length;t++)n[t].setAttribute("order",t),n[t].onclick=function(){s(E=this.getAttribute("order"));var e=k[E].questions.length;o(this.innerHTML,e),document.querySelector(".secondMenu.disabled")&&document.querySelector(".secondMenu.disabled").classList.remove("disabled"),u()}}function u(){for(var e="<a order='0'>All</a>",o=1,t=[],n=k[E].questions,r=0;r<n.length;r++)-1==t.indexOf(n[r].category)&&""!==n[r].category&&(t.push(n[r].category),console.log(k[E].questions[r].category),e+="<a>"+k[E].questions[r].category+"</a>",o++);document.querySelector("#categoryList").innerHTML=e;for(var s=document.querySelectorAll("#categoryList.dropdownList a"),r=0;r<s.length;r++)s[r].setAttribute("order",r),s[r].onclick=function(){D=this.getAttribute("order");var e=o;i(this.innerHTML,e)}}function i(e,o){N=e,document.querySelector("#categoryMenu").innerText=e,document.querySelector("#categoryMenu + .dropdownList").classList.toggle("show"),console.log("you clicked "+e);for(var t=k[E].questions,n=0,r=0;r<t.length;r++)t[r].category==N&&n++;document.querySelector(".questionCount").innerHTML="All"==N?t.length+" Questions":n+" Questions"}function l(){document.querySelector(".randomStatus").innerText="Random on",document.querySelector(".randomHolder").classList.add("active"),d()}function a(){document.querySelector(".randomStatus").innerText="Random off",document.querySelector(".randomHolder").classList.remove("active"),d()}function d(){if(console.log("in randomToggle function"),z){console.log("random var has value");var e=C[E].questions;console.log(e,"normal order"),e.sort(function(e,o){return Math.random()-.5}),console.log(e,"random order"),k=C,console.log(k[E].questions,"topicData now random")}else console.log("topicdata backup",x),console.log("topicdata random",C),k=x,console.log(k[E].questions,"topicData random is off")}function m(){F=(new Date).getTime();var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=this.responseText;if(document.querySelector("body").innerHTML=e,t(),r(),n(),"All"==N)document.querySelector(".questionHolder").innerHTML=k[E].questions[0].question;else{console.log("chosenCategory",N),console.log(k[E].questions);for(var o=0;o<k[E].questions.length;o++)console.log(k[E].questions[o].category),k[E].questions[o].category==N&&R.push(k[E].questions[o]);console.log(R,"show me what you got, topicDataFilteredCategory."),document.querySelector(".questionHolder").innerHTML=R[0].question}document.querySelector("#yourAnswer").focus(),document.querySelector(".close").addEventListener("click",function(){v(Q.endQuiz,"yes","no")}),document.querySelector(".hint").addEventListener("click",function(){console.log("progress counter inside hint is",I),v(k[E].questions[I].hint,"yes")}),document.querySelector(".skip").addEventListener("click",function(){y()}),document.querySelector(".random span").innerHTML=z?"Random On":"Random Off",document.querySelector(".answer").addEventListener("click",function(){g()}),document.querySelector("#yourAnswer").addEventListener("keypress",function(e){13==e.keyCode&&(e.preventDefault(),console.log("you pressed enter in text field"),J||g())})}p()},e.open("GET","assets/data/questionScreen.html",!0),e.send()}function g(){var e,o=document.querySelector("#answerRow textarea").value;if("All"==N){t=k[E].questions[I].answer;e=k[E].questions[I].question}else{var t=R[I].answer;e=R[I].question}if(""!=o){o.toLowerCase().trim()==t.toLowerCase()?(v("Correct, the answer is <span class='correct'>"+t+"</span>","Continue"),document.getElementById("img").src="",I++,B++):(Y.push({question:e,answer:t,userAnswer:o}),v("Sorry, the answer is <span class='wrong'>"+t+"</span>","Continue"))}else h(Q.pleaseAnswer)}function y(){I<k[E].questions.length?q():I==k[E].questions.length&&q()}function q(){"All"==N?(I<k[E].questions.length&&++I<=k[E].questions.length-1&&(document.querySelector(".questionHolder").innerHTML=k[E].questions[I].question,n(),p()),I==k[E].questions.length&&S()):(I<R.length&&++I<=R.length-1&&(document.querySelector(".questionHolder").innerHTML=R[I].question,p()),I==R.length&&S())}function S(){console.log("Progress report: game over");var e="<h2>Game Over</h2>Topic: "+k[E].name+"<br>Category: "+N+"<br><strong>Score</strong>: "+B+" out of "+k[E].questions.length;console.log(Y);for(var o="<div id='answerToggle'>Show Wrong Answers</div><ul id='resultsList'>",t=0;t<Y.length;t++)o+="<li><span>Question: </span>"+Y[t].question+"</li>",o+="<li><span>Your Answer: </span>"+Y[t].userAnswer+"</li>",o+="<li class='groupEnd'><span>Correct Answer: </span>"+Y[t].answer+"</li>";o+="</ul>",J=!0,P=(new Date).getTime(),T(),v(e+o,"Continue"),document.querySelector(".messageBox .yes").focus(),document.querySelector("#answerToggle").addEventListener("click",function(){document.querySelector("#resultsList").classList.toggle("show"),document.querySelector("#resultsList").classList.contains("show")?document.querySelector("#answerToggle").innerHTML="Hide Wrong Answers":document.querySelector("#answerToggle").innerHTML="Show Wrong Answers"})}function p(){"All"==N?(document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(I)+1)+" / "+k[E].questions.length,W=k[E].questions.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value="")):(document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(I)+1)+" / "+R.length,W=R.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value=""))}function f(){location.reload()}function h(e){var o=document.createElement("div");o.classList.add("errorBox"),o.innerText=e,document.querySelector(".container").appendChild(o),setTimeout(function(){document.querySelector(".container").removeChild(document.querySelector(".errorBox"))},5e3)}function v(e,o,t){function n(){document.querySelector(".container").removeChild(document.querySelector("."+r)),"Continue"==o&&(J?f():(y(),document.querySelector("#yourAnswer").focus()))}var r="messageBox",s=document.createElement("div");s.classList.add(r),t?(s.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full multi'><button class='yes'>"+o+"</button><button class='no'>"+t+"</button></div></div>",document.querySelector(".container").appendChild(s),document.querySelector("."+r+" .yes").focus(),document.querySelector("."+r+" .yes").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+r)),f()}),document.querySelector("."+r+" .no").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+r)),document.querySelector("#yourAnswer").focus()})):(s.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full'><button class='yes'>"+o+"</button></div></div>",document.querySelector(".container").appendChild(s),document.querySelector("."+r+" .yes").focus(),document.querySelector("."+r+" .yes").addEventListener("keypress",function(e){console.log("I know you pressed something"),13==e.keyCode&&(e.preventDefault(),console.log("you pressed enter in a modal"),n())}),document.querySelector("."+r+" .yes").addEventListener("click",function(){n(),console.log("I will try to close modal")}))}function w(e){window.localStorage.setItem("gameSession",JSON.stringify(e)),console.log("prove it exists by typing:","JSON.parse(window.localStorage.getItem('gameSession'));")}function L(e){return JSON.parse(window.localStorage.getItem(e))}function T(){console.log("Info sent to localStorage"),O.push({date:M(),score:B,outOf:W,duration:[F,P,H(Math.abs(F-P))],topic:k[E].name,topicImg:k[E].questions[I].img,category:N}),w(O)}function M(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],o=new Date,t=o.getDate(),n=o.getMonth(),r=o.getFullYear();o.getHours(),o.getMinutes(),o.getSeconds();return e[n]+" "+t+", "+r}function H(e){var o=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return o+":"+(t<10?"0":"")+t}function b(){for(var e=0,o=0;o<O.length;o++)e+=O[o].score/O[o].outOf;return e=(e/O.length*100).toFixed(2)+"%"}function A(){for(var e=0,o=0;o<O.length;o++)e+=O[o].duration[1]-O[o].duration[0];return e/=O.length,H(e)}var k,C,x,E,D,O,R=[],N="All",I=0,B=0,J=null,z=!1,Q={selectTopic:"Please select a topic.",pleaseAnswer:"At least try and answer the question, alright?",endQuiz:"Are you sure you want to end your quiz?"};L("gameSession")?O=L("gameSession"):(console.log("No localStorage, starting fresh."),O=[]);var F,P,W,Y=[];L("gameSession")?(document.querySelector(".stats .quizSessions span").innerHTML=O.length,document.querySelector(".stats .avgScore span").innerHTML=b(),document.querySelector(".stats .avgDuration span").innerHTML=A()):document.querySelector(".stats ul").innerHTML="<span class='dim'>No games played yet!</span>",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(k=JSON.parse(this.responseText),x=k,console.log("Topic data backup CLEAN",x),C=k,console.log("Topicdata contents",k),c())},e.open("GET","assets/data/topics.json",!0),e.send()}(),document.querySelector(".dropdownMenu").addEventListener("click",function(o){o.preventDefault(),console.log("You clicked topic menu",this.id),e(this.id)}),document.querySelector(".secondMenu").addEventListener("click",function(o){document.querySelector("#categoryMenu").classList.contains("disabled")||(o.preventDefault(),console.log("You clicked categoryMenu",this.id),e(this.id))}),document.querySelector(".start").addEventListener("click",function(){"Choose One"==document.querySelector("#topicMenu").innerText?h(Q.selectTopic):m()}),document.querySelector(".randomHolder").addEventListener("click",function(){z?(z=!1,a()):(z=!0,l())}),document.querySelector(".info")&&document.querySelector(".info").addEventListener("click",function(){v("<h3>What is this?</h3><div class='left-align small''><p>Typical Quiz is a study tool to help my stubborn brain remember stuff. Built from scratch in vanilla Javascript, it was also good code practice.</p><p>Source Code: <a href='https://github.com/gricha2380/typicalquiz' class='match'>https://github.com/gricha2380/typicalquiz</a></p></div>","Okay")})},!1);
//# sourceMappingURL=scripts.min.js.map
